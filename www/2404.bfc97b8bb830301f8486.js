(self.webpackChunkdrink_counter=self.webpackChunkdrink_counter||[]).push([[2404],{2404:(t,i,e)=>{"use strict";e.r(i),e.d(i,{Tab2PageModule:()=>A});var n=e(9728),o=e(8583),r=e(665),l=e(3686),s=e(4762),c=e(8720);function a(t,i){if(1&t&&(c.TgZ(0,"ion-item"),c.TgZ(1,"ion-label"),c._uU(2),c.qZA(),c.TgZ(3,"ion-note",4),c._uU(4),c.qZA(),c.qZA()),2&t){const t=i.$implicit;c.xp6(2),c.AsE("",t.name," x",t.count,""),c.xp6(2),c.hij("",t.price*t.count,"\u20ac")}}let d=(()=>{class t{constructor(t){this.modalCtrl=t}ngOnInit(){history.pushState({modal:!0,desc:"fake state for our modal"},null)}ngOnDestroy(){window.history.state.modal&&history.back()}dismissModal(){this.closeModal()}getTotalPrice(){return this.bill.drinkCardList.reduce((t,i)=>t+(i.price||0)*i.count,0)}closeModal(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(i){return new(i||t)(c.Y36(n.IN))},t.\u0275cmp=c.Xpm({type:t,selectors:[["drink-history-bill-detail"]],hostBindings:function(t,i){1&t&&c.NdJ("popstate",function(t){return i.dismissModal(t)},!1,c.Jf7)},inputs:{bill:"bill"},decls:16,vars:6,consts:[["size","large"],["fill","clear","slot","end",3,"click"],["slot","icon-only","name","close-outline"],[4,"ngFor","ngForOf"],["slot","end"]],template:function(t,i){1&t&&(c.TgZ(0,"ion-header"),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title",0),c._uU(3),c.qZA(),c.TgZ(4,"ion-button",1),c.NdJ("click",function(){return i.closeModal()}),c._UZ(5,"ion-icon",2),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ion-content"),c.TgZ(7,"ion-list"),c.YNc(8,a,5,3,"ion-item",3),c.TgZ(9,"ion-item"),c.TgZ(10,"ion-label"),c.TgZ(11,"strong"),c._uU(12,"Total"),c.qZA(),c.qZA(),c.TgZ(13,"ion-note",4),c._uU(14),c.ALo(15,"number"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.hij(" ",(null==i.bill?null:i.bill.placeName)||"Cuenta"," "),c.xp6(5),c.Q6J("ngForOf",i.bill.drinkCardList),c.xp6(6),c.hij("",c.xi3(15,3,i.getTotalPrice(),"0.0-2"),"\u20ac"))},directives:[n.Gu,n.sr,n.wd,n.YG,n.gu,n.W2,n.q_,o.sg,n.Ie,n.Q$,n.uN],pipes:[o.JJ],styles:[""]}),t})();var u=e(1696);function p(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"ion-content"),c.TgZ(1,"ion-list"),c.TgZ(2,"ion-item",6),c.NdJ("click",function(){return c.CHM(t),c.oxw().deleteHistoryCard()}),c.TgZ(3,"ion-label",7),c._uU(4,"Eliminar"),c.qZA(),c._UZ(5,"ion-icon",8),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(2),c.Q6J("button",!0)("detail",!1))}let g=(()=>{class t{constructor(){this.onDeleteHistoryBill=new c.vpe}ngOnInit(){}getTotalPrice(){return this.drinkHistoryBill.drinkCardList.reduce((t,i)=>t+(i.price||0)*i.count,0)}deleteHistoryCard(){this.onDeleteHistoryBill.emit(this.index)}stopPropagation(t){t.stopPropagation()}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["drink-history-card"]],inputs:{drinkHistoryBill:"drinkHistoryBill",index:"index"},outputs:{onDeleteHistoryBill:"onDeleteHistoryBill"},decls:15,vars:15,consts:[["button","true"],["shape","round","fill","clear",1,"history-card-open-popover-button",3,"id","click"],["name","ellipsis-vertical"],[1,"ion-text-justify"],[1,"price"],[3,"trigger","dismissOnSelect","arrow"],[3,"button","detail","click"],["color","danger"],["color","danger","name","trash"]],template:function(t,i){1&t&&(c.TgZ(0,"ion-card",0),c.TgZ(1,"ion-card-header"),c.TgZ(2,"ion-card-title"),c._uU(3),c.qZA(),c.TgZ(4,"ion-card-subtitle"),c._uU(5),c.ALo(6,"date"),c.qZA(),c.TgZ(7,"ion-button",1),c.NdJ("click",function(t){return i.stopPropagation(t)}),c._UZ(8,"ion-icon",2),c.qZA(),c.qZA(),c.TgZ(9,"ion-card-content",3),c.TgZ(10,"p",4),c._uU(11),c.ALo(12,"number"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"ion-popover",5),c.YNc(14,p,6,2,"ng-template"),c.qZA()),2&t&&(c.xp6(3),c.Oqu(i.drinkHistoryBill.placeName),c.xp6(2),c.Oqu(c.gM2(6,7,i.drinkHistoryBill.startDate,"EEE, dd/MM/YYYY","","es")),c.xp6(2),c.s9C("id","history-card-open-popover-button"+i.index),c.xp6(4),c.hij("",c.xi3(12,12,i.getTotalPrice(),"0.0-2")," \u20ac"),c.xp6(2),c.s9C("trigger","history-card-open-popover-button"+i.index),c.Q6J("dismissOnSelect",!0)("arrow",!0))},directives:[n.PM,n.Zi,n.Dq,n.tO,n.YG,n.gu,n.FN,n.d8,n.W2,n.q_,n.Ie,n.Q$],pipes:[o.uU,o.JJ],styles:[".price[_ngcontent-%COMP%]{font-size:26px}.history-card-open-popover-button[_ngcontent-%COMP%]{position:absolute;right:0;top:5px}"]}),t})();function Z(t,i){if(1&t){const t=c.EpF();c.TgZ(0,"drink-history-card",6),c.NdJ("onDeleteHistoryBill",function(i){return c.CHM(t),c.oxw().deleteBillFromHistory(i)})("click",function(){const i=c.CHM(t).$implicit;return c.oxw().openHistoryBill(i)}),c.qZA()}if(2&t){const t=i.index;c.Q6J("drinkHistoryBill",i.$implicit)("index",t)}}const m=[{path:"",component:(()=>{class t{constructor(t,i,e){this.drinkHistoryService=t,this.alertCtrl=i,this.modalCtrl=e}ngOnInit(){this.drinkHistoryService.getDrinkHistory().then(t=>this.billHistory=t)}deleteBillFromHistory(t){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:"Borrar cuenta del historial",message:"\xbfSeguro que quieres eliminar la cuenta del historial?",buttons:[{text:"Cancelar"},{text:"Aceptar",handler:()=>{this.drinkHistoryService.deleteBillFromHistoryByIndex(t)}}]})).present()})}openHistoryBill(t){return(0,s.mG)(this,void 0,void 0,function*(){(yield this.modalCtrl.create({component:d,mode:"ios",componentProps:{bill:t},breakpoints:[0,.85,.99],initialBreakpoint:.85})).present()})}}return t.\u0275fac=function(i){return new(i||t)(c.Y36(u.F),c.Y36(n.Br),c.Y36(n.IN))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-tab2"]],decls:11,vars:3,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"drink-history-container"],[3,"drinkHistoryBill","index","onDeleteHistoryBill","click",4,"ngFor","ngForOf"],[3,"drinkHistoryBill","index","onDeleteHistoryBill","click"]],template:function(t,i){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3," Historial "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(4,"ion-content",1),c.TgZ(5,"ion-header",2),c.TgZ(6,"ion-toolbar"),c.TgZ(7,"ion-title",3),c._uU(8,"Historial"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",4),c.YNc(10,Z,1,2,"drink-history-card",5),c.qZA(),c.qZA()),2&t&&(c.Q6J("translucent",!0),c.xp6(4),c.Q6J("fullscreen",!0),c.xp6(6),c.Q6J("ngForOf",i.billHistory))},directives:[n.Gu,n.sr,n.wd,n.W2,o.sg,g],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[l.Bz.forChild(m)],l.Bz]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,r.u5,n.Pc]]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,r.u5,n.Pc]]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.Pc,o.ez,r.u5,y,h,f]]}),t})()}}]);